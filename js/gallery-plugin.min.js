/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/@photo-sphere-viewer/gallery-plugin@5.1.4/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("three"),require("@photo-sphere-viewer/core")):"function"==typeof define&&define.amd?define(["exports","three","@photo-sphere-viewer/core"],t):t(((e="undefined"!=typeof globalThis?globalThis:e||self).PhotoSphereViewer=e.PhotoSphereViewer||{},e.PhotoSphereViewer.GalleryPlugin={}),e.THREE,e.PhotoSphereViewer)}(this,(function(e,t,s){
/*!
 * PhotoSphereViewer.GalleryPlugin 5.1.4
 * @copyright 2023 Damien "Mistic" Sorel
 * @licence MIT (https://opensource.org/licenses/MIT)
 */
"use strict";var i=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,a=Object.prototype.hasOwnProperty,o=(e,t)=>{for(var s in t)i(e,s,{get:t[s],enumerable:!0})},l=()=>s,h={};o(h,{GalleryPlugin:()=>O,events:()=>d});var c=l(),d={};o(d,{HideGalleryEvent:()=>m,ShowGalleryEvent:()=>u});var v=l(),p=class extends v.TypedEvent{constructor(){super(p.type)}},u=p;u.type="show-gallery";var m=class extends v.TypedEvent{constructor(){super(u.type)}};m.type="hide-gallery";var g=l(),y=class extends g.AbstractButton{constructor(e){super(e,{className:"psv-gallery-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:'<svg viewBox="185 115 330 330" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M186.7 326.7V163.3c0-15 8.3-23.3 23.3-23.3h210c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H210c-15 0-23.3-8.3-23.3-23.3zm70 70v-23.4H420c30.2 0 46.7-16.4 46.7-46.6V210H490c15 0 23.3 8.3 23.3 23.3v163.4c0 15-8.3 23.3-23.3 23.3H280c-15 0-23.3-8.3-23.3-23.3zm-23.8-105H397l-40-50.4-26.7 29.7-44.3-54.5zm106.7-76c9.6 0 17.8-7.8 17.8-17.2a18 18 0 0 0-17.8-17.8c-9.4 0-17.2 8.2-17.2 17.8 0 9.4 7.8 17.2 17.2 17.2z"/>\x3c!--Created by Wolf BÃ¶se from the Noun Project--\x3e</svg>'}),this.plugin=this.viewer.getPlugin("gallery"),this.plugin&&(this.plugin.addEventListener(u.type,this),this.plugin.addEventListener(m.type,this))}destroy(){this.plugin&&(this.plugin.removeEventListener(u.type,this),this.plugin.removeEventListener(m.type,this)),super.destroy()}handleEvent(e){e instanceof u?this.toggleActive(!0):e instanceof m&&this.toggleActive(!1)}isSupported(){return!!this.plugin}onClick(){this.plugin.toggle()}};y.id="gallery";var w=l(),f=l(),b=l(),E="psvGalleryItem",L=b.utils.dasherize(E),P="psv-gallery-item--active",S=class extends f.AbstractComponent{constructor(e,t){super(t,{className:"psv-gallery psv--capture-event"}),this.plugin=e,this.state={visible:!0,mousedown:!1,initMouseX:null,mouseX:null},this.container.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 200">\n  <defs>\n    <symbol id="psvGalleryBlankIcon" viewBox="0 0 200 200">\n      <rect x="0" y="0" width="200" height="200" fill="#666"/>\n      <g transform="scale(0.25) translate(25 20) " fill="#eee">\n        <path d="M376 220.61c-85.84 0-155.39 69.56-155.39 155.39 0 85.84 69.56 155.39 155.39 155.39 85.84 0 155.39-69.56 155.39-155.39 0-85.84-69.56-155.39-155.39-155.39zm0 300.92c-80.41 0-145.53-65.12-145.53-145.53S295.59 230.47 376 230.47 521.53 295.59 521.53 376 456.41 521.53 376 521.53z"/>\n        <path d="M467.27 300.03H284.74a18.21 18.21 0 0 0-18.25 18.25v115.43a18.21 18.21 0 0 0 18.25 18.26h182.53a18.21 18.21 0 0 0 18.25-18.26V318.28a18.2 18.2 0 0 0-18.25-18.25zm-190.91 18.25a8.64 8.64 0 0 1 8.39-8.38h182.53a8.64 8.64 0 0 1 8.38 8.38V413l-44.89-35.52c-.49-.5-.99-.5-1.48-.99h-2.46c-.5 0-1 0-1.48.5l-37.5 21.2-43.9-58.7-.5-.5s0-.48-.49-.48c0 0-.49 0-.49-.5-.49 0-.49-.49-.99-.49-.49 0-.49 0-.98-.49H337.53c-.5 0-.5.5-.99.5h-.49l-.5.48s-.48 0-.48.5l-58.7 65.12zM467.27 442.1H284.74a8.64 8.64 0 0 1-8.39-8.38v-15.3l63.15-68.07 42.92 57.22 1.48 1.48h.49c.5.5 1.48.5 1.97.5H388.83l38.47-21.72 46.37 36.5c.5.5 1.49 1 1.98 1v8.88c0 3.95-3.45 7.9-8.38 7.9z"/>\n        <path d="M429.77 333.58a13.81 13.81 0 1 1-27.63 0 13.81 13.81 0 0 1 27.63 0"/>\n      </g>\n    </symbol>\n  </defs>\n</svg>',this.container.querySelector("svg").style.display="none";const s=document.createElement("div");s.className="psv-panel-close-button",s.innerHTML=f.CONSTANTS.ICONS.close,this.container.appendChild(s),this.items=document.createElement("div"),this.items.className="psv-gallery-container",this.container.appendChild(this.items),this.observer=new IntersectionObserver((e=>{e.forEach((e=>{if(e.intersectionRatio>0){const t=e.target;t.style.backgroundImage=`url(${t.dataset.src})`,delete t.dataset.src,this.observer.unobserve(e.target)}}))}),{root:this.viewer.container}),this.container.addEventListener("wheel",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mousemove",this),this.container.addEventListener("click",this),window.addEventListener("mouseup",this),s.addEventListener("click",(()=>this.plugin.hide())),this.hide()}destroy(){window.removeEventListener("mouseup",this),this.observer.disconnect(),super.destroy()}handleEvent(e){switch(e.type){case"wheel":this.container.scrollLeft+=50*e.deltaY,e.preventDefault();break;case"mousedown":this.state.mousedown=!0,this.state.initMouseX=e.clientX,this.state.mouseX=e.clientX;break;case"mousemove":if(this.state.mousedown){const t=this.state.mouseX-e.clientX;this.container.scrollLeft+=t,this.state.mouseX=e.clientX}break;case"mouseup":this.state.mousedown=!1,this.state.mouseX=null,e.preventDefault();break;case"click":if(Math.abs(this.state.initMouseX-e.clientX)<10){const t=f.utils.getClosest(e.target,`[data-${L}]`);t&&this.plugin.__click(t.dataset.psvGalleryItem)}}}show(){this.container.classList.add("psv-gallery--open"),this.state.visible=!0}hide(){this.container.classList.remove("psv-gallery--open"),this.state.visible=!1}setItems(e){this.items.innerHTML=((e,t)=>`\n${e.map((e=>`\n<div class="psv-gallery-item" data-${L}="${e.id}" style="width:${t.width}px">\n  <div class="psv-gallery-item-wrapper" style="padding-bottom:calc(100% * ${t.height} / ${t.width})">\n    ${e.name?`<div class="psv-gallery-item-title"><span>${e.name}</span></div>`:""}\n    <svg class="psv-gallery-item-thumb" viewBox="0 0 200 200" preserveAspectRatio="xMidYMid slice"><use href="#psvGalleryBlankIcon"></use></svg>\n    ${e.thumbnail?`<div class="psv-gallery-item-thumb" data-src="${e.thumbnail}"></div>`:""}\n  </div>\n</div>\n`)).join("")}\n`)(e,this.plugin.config.thumbnailSize),this.observer&&(this.observer.disconnect(),this.items.querySelectorAll("[data-src]").forEach((e=>{this.observer.observe(e)})))}setActive(e){if(this.items.querySelector("."+P)?.classList.remove(P),e){this.items.querySelector(`[data-${L}="${e}"]`)?.classList.add(P)}}},x=w.utils.getConfigParser({items:[],visibleOnLoad:!1,hideOnClick:!0,thumbnailSize:{width:200,height:100}}),O=class extends w.AbstractConfigurablePlugin{constructor(e,t){super(e,t),this.items=[],this.gallery=new S(this,this.viewer)}init(){super.init(),this.viewer.addEventListener(w.events.PanoramaLoadedEvent.type,this),this.viewer.addEventListener(w.events.ShowPanelEvent.type,this),this.config.visibleOnLoad&&this.viewer.addEventListener(w.events.ReadyEvent.type,(()=>{this.show()}),{once:!0}),this.setItems(this.config.items),delete this.config.items,setTimeout((()=>this.__updateButton()))}destroy(){this.viewer.removeEventListener(w.events.PanoramaLoadedEvent.type,this),this.viewer.removeEventListener(w.events.ShowPanelEvent.type,this),this.gallery.destroy(),super.destroy()}setOptions(e){super.setOptions(e),e.thumbnailSize&&this.gallery.setItems(this.items)}handleEvent(e){if(e instanceof w.events.PanoramaLoadedEvent){const t=this.items.find((t=>w.utils.deepEqual(t.panorama,e.data.panorama)));this.currentId=t?.id,this.gallery.setActive(t?.id)}else e instanceof w.events.ShowPanelEvent&&this.gallery.isVisible()&&this.hide()}show(){return this.dispatchEvent(new u),this.gallery.show()}hide(){return this.dispatchEvent(new m),this.gallery.hide()}toggle(){this.gallery.isVisible()?this.hide():this.show()}setItems(e,t){e?e.forEach(((e,t)=>{if(!e.id)throw new w.PSVError(`Item ${t} has no "id".`);if(!e.panorama)throw new w.PSVError(`Item ${e.id} has no "panorama".`)})):e=[],this.handler=t,this.items=e.map((e=>({...e,id:`${e.id}`}))),this.gallery.setItems(this.items),this.__updateButton()}__click(e){if(e!==this.currentId){if(this.handler)this.handler(e);else{const t=this.items.find((t=>t.id===e));this.viewer.setPanorama(t.panorama,{caption:t.name,...t.options})}this.currentId=e,this.gallery.setActive(e),this.config.hideOnClick&&this.hide()}}__updateButton(){this.viewer.navbar.getButton(y.id,!1)?.toggle(this.items.length>0)}};O.id="gallery",O.configParser=x,O.readonlyOptions=["visibleOnLoad","items"],c.DEFAULTS.lang[y.id]="Gallery",(0,c.registerButton)(y,"caption:left"),((e,t,s,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of r(t))a.call(e,l)||l===s||i(e,l,{get:()=>t[l],enumerable:!(o=n(t,l))||o.enumerable})})(i(e,"__esModule",{value:!0}),h)}));
//# sourceMappingURL=/sm/268cb079c7e0a3708711fd18a6beef074770aa7ec6d41d37a7962875fa94a6a9.map